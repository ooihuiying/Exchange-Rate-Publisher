<!DOCTYPE html>
<html>
<head>
    <title>Kafka Consumer Example</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs@1.5.1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/dist/stomp.min.js"></script>
</head>
<body>

<button id="startButton">Start Consumer</button>
<div id="valueContainer">Value: Waiting for updates...</div>

<script>
    var socket = new SockJS('/websocket');
    var stompClient = Stomp.over(socket);

    stompClient.connect({}, function () {
        stompClient.subscribe('/topic/consumedValue', function (message) {
            var value = JSON.parse(message.body).value;
            // Update the UI with the new value
            document.getElementById('valueContainer').innerText = "Value: " + value;
        });
    });

    document.getElementById('startButton').addEventListener('click', function () {
        fetch('/start-consumer');
    });
</script>

</body>
</html>
